<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Ficha de Produ√ß√£o</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @page {
            size: A4;
            margin: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            font-size: 10pt;
            line-height: 1.4;
            color: #000;
            background: #fff;
        }

        /* FICHA - Exatamente 148.5mm */
        .ficha {
            width: 210mm;
            height: 148.5mm;
            position: relative;
            page-break-inside: avoid;
            page-break-after: always;
            padding: 8mm;
            border: 1px solid #e0e0e0;
        }

        /* HEADER - Informa√ß√µes principais em linha */
        .header {
            border-bottom: 2px solid #000;
            padding-bottom: 6px;
            margin-bottom: 8px;
        }

        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4px;
        }

        .header-item {
            display: inline-block;
        }

        .header-label {
            font-size: 8px;
            font-weight: 600;
            text-transform: uppercase;
            color: #666;
            letter-spacing: 0.5px;
        }

        .header-value {
            font-size: 11px;
            font-weight: 700;
            color: #000;
            margin-left: 4px;
        }

        /* N√öMERO DO PEDIDO - Destaque m√°ximo */
        .pedido-section {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
            padding-bottom: 8px;
            border-bottom: 1px solid #000;
        }

        .pedido-numero-box {
            flex: 0 0 auto;
        }

        .pedido-label {
            font-size: 8px;
            font-weight: 600;
            text-transform: uppercase;
            color: #666;
            margin-bottom: 2px;
        }

        .pedido-numero {
            font-size: 36px;
            font-weight: 900;
            line-height: 1;
            color: #000;
            letter-spacing: -1px;
        }

        .badge-reposicao {
            display: inline-block;
            background: #ff6b35;
            color: #fff;
            padding: 4px 10px;
            font-size: 10px;
            font-weight: 700;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-left: 10px;
            vertical-align: middle;
        }

        /* CLIENTE */
        .cliente-box {
            flex: 1;
            padding-left: 20px;
        }

        .cliente-nome {
            font-size: 18px;
            font-weight: 700;
            text-transform: uppercase;
            color: #000;
            margin-bottom: 3px;
            line-height: 1.2;
        }

        .cliente-info {
            font-size: 10px;
            color: #666;
            font-weight: 500;
        }

        /* TIPO DE PRODU√á√ÉO */
        .tipo-badge {
            border: 2px solid #000;
            padding: 6px 12px;
            font-weight: 800;
            font-size: 11px;
            text-transform: uppercase;
            display: inline-block;
            border-radius: 4px;
            letter-spacing: 0.5px;
        }

        .tipo-badge.painel {
            border-color: #0066cc;
            color: #0066cc;
            background: #e6f2ff;
        }

        .tipo-badge.lona {
            border-color: #00aa00;
            color: #00aa00;
            background: #e6ffe6;
        }

        .tipo-badge.totem {
            border-color: #9933cc;
            color: #9933cc;
            background: #f2e6ff;
        }

        .tipo-badge.adesivo {
            border-color: #ff8800;
            color: #ff8800;
            background: #fff2e6;
        }

        /* CONTE√öDO PRINCIPAL */
        .content {
            display: flex;
            gap: 12px;
            height: calc(100% - 90mm);
        }

        /* COLUNA ESQUERDA - Dados */
        .col-dados {
            flex: 1;
            min-width: 0;
        }

        .section-title {
            font-size: 8px;
            font-weight: 700;
            text-transform: uppercase;
            color: #666;
            margin-bottom: 3px;
            letter-spacing: 0.5px;
        }

        .produto-nome {
            font-size: 15px;
            font-weight: 700;
            text-transform: uppercase;
            color: #000;
            margin-bottom: 6px;
            line-height: 1.2;
        }

        /* GRID DE INFORMA√á√ïES */
        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-bottom: 8px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 4px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
        }

        .info-label {
            font-size: 8px;
            font-weight: 600;
            text-transform: uppercase;
            color: #666;
            margin-bottom: 2px;
        }

        .info-value {
            font-size: 11px;
            font-weight: 700;
            color: #000;
        }

        .info-value.highlight {
            font-size: 16px;
            color: #ff6b35;
        }

        /* FICHA T√âCNICA */
        .ficha-tecnica {
            margin-bottom: 8px;
        }

        .tech-row {
            display: flex;
            gap: 4px;
            margin-bottom: 3px;
            font-size: 10px;
        }

        .tech-label {
            font-weight: 700;
            color: #666;
            min-width: 60px;
        }

        .tech-value {
            font-weight: 600;
            color: #000;
        }

        /* ESPECIFICA√á√ïES */
        .specs-list {
            list-style: none;
            padding: 0;
            margin: 8px 0;
        }

        .specs-list li {
            padding: 4px 0 4px 12px;
            position: relative;
            font-size: 10px;
            border-bottom: 1px solid #f0f0f0;
        }

        .specs-list li::before {
            content: "‚ñ™";
            position: absolute;
            left: 0;
            font-weight: 700;
            color: #666;
        }

        /* OBSERVA√á√ïES */
        .obs-box {
            margin-top: 8px;
            border-left: 4px solid #ff6b35;
            padding: 6px 8px;
            background: #fff5f0;
            border-radius: 3px;
        }

        .obs-box.pedido {
            border-left-color: #0066cc;
            background: #e6f2ff;
        }

        .obs-title {
            font-size: 8px;
            font-weight: 700;
            text-transform: uppercase;
            color: #000;
            margin-bottom: 3px;
        }

        .obs-text {
            font-size: 10px;
            font-weight: 600;
            color: #000;
            line-height: 1.3;
        }

        /* COLUNA DIREITA - Imagem */
        .col-imagem {
            flex: 0 0 75mm;
            display: flex;
            flex-direction: column;
        }

        .img-container {
            flex: 1;
            background: #fff;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }

        .img-container img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }

        .no-image {
            color: #ccc;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .img-legenda {
            font-size: 9px;
            color: #666;
            margin-top: 4px;
            text-align: center;
            font-style: italic;
            line-height: 1.2;
        }

        /* FOOTER */
        .footer {
            position: absolute;
            bottom: 8mm;
            left: 8mm;
            right: 8mm;
            border-top: 2px solid #000;
            padding-top: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .footer-item {
            flex: 1;
        }

        .footer-label {
            font-size: 8px;
            font-weight: 600;
            text-transform: uppercase;
            color: #666;
            margin-bottom: 2px;
        }

        .footer-value {
            font-size: 11px;
            font-weight: 700;
            color: #000;
        }

        .footer-controle {
            text-align: right;
            font-size: 10px;
            font-weight: 600;
        }

        /* BADGES DE URG√äNCIA */
        .badge-urgencia {
            display: inline-block;
            padding: 3px 8px;
            font-size: 9px;
            font-weight: 700;
            border-radius: 3px;
            text-transform: uppercase;
            margin-left: 6px;
        }

        .badge-urgencia.atrasado {
            background: #dc3545;
            color: #fff;
        }

        .badge-urgencia.hoje {
            background: #ffc107;
            color: #000;
        }

        /* PRIORIDADE COM COR */
        .prioridade-alta {
            color: #dc3545;
        }

        .prioridade-media {
            color: #ffc107;
        }

        .prioridade-baixa {
            color: #28a745;
        }
    </style>
</head>

<body>

    {{#each items}}
    <div class="ficha">
        <!-- HEADER -->
        <div class="header">
            <div class="header-row">
                <div class="header-item">
                    <span class="header-label">Data de Envio:</span>
                    <span class="header-value">{{data_envio}}</span>
                </div>
                <div class="header-item">
                    <span class="header-label">Prioridade:</span>
                    <span
                        class="header-value {{#if (eq prioridade 'Alta')}}prioridade-alta{{else}}{{#if (eq prioridade 'M√©dia')}}prioridade-media{{else}}prioridade-baixa{{/if}}{{/if}}">
                        {{prioridade}}
                    </span>
                    {{#if urgencia_atrasado}}
                    <span class="badge-urgencia atrasado">ATRASADO</span>
                    {{else}}{{#if urgencia_hoje}}
                    <span class="badge-urgencia hoje">HOJE</span>
                    {{/if}}{{/if}}
                </div>
                <div class="header-item">
                    <span class="header-label">Forma de Envio:</span>
                    <span class="header-value">{{forma_envio}}</span>
                </div>
            </div>
        </div>

        <!-- PEDIDO E CLIENTE -->
        <div class="pedido-section">
            <div class="pedido-numero-box">
                <div class="pedido-label">N√∫mero do Pedido</div>
                <div class="pedido-numero">
                    #{{numero}}
                    {{#if is_reposicao}}
                    <span class="badge-reposicao">REPOSI√á√ÉO</span>
                    {{/if}}
                </div>
            </div>
            <div class="cliente-box">
                <div class="pedido-label">Cliente</div>
                <div class="cliente-nome">{{cliente}}</div>
                <div class="cliente-info">{{telefone_cliente}}{{#if cidade_estado}} ‚Ä¢ {{cidade_estado}}{{/if}}</div>
            </div>
            <div>
                <span class="tipo-badge {{tipo_producao}}">{{tipo_producao}}</span>
            </div>
        </div>

        <!-- CONTE√öDO -->
        <div class="content">
            <!-- COLUNA DADOS -->
            <div class="col-dados">
                <div class="section-title">Descri√ß√£o do Produto</div>
                <div class="produto-nome">{{descricao}}</div>

                <div class="info-grid">
                    <div class="info-item">
                        <span class="info-label">Dimens√µes</span>
                        <span class="info-value">{{dimensoes}}</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Quantidade</span>
                        <span class="info-value highlight">{{quantity}}</span>
                    </div>
                </div>

                <div class="ficha-tecnica">
                    <div class="section-title">Ficha T√©cnica</div>
                    <div class="tech-row">
                        <span class="tech-label">Material:</span>
                        <span class="tech-value">{{material}}</span>
                    </div>
                    <div class="tech-row">
                        <span class="tech-label">Emenda:</span>
                        <span class="tech-value">{{emenda_label}}{{#if emenda_qtd}} ({{emenda_qtd}} un){{/if}}</span>
                    </div>
                </div>

                <ul class="specs-list">
                    {{#if (eq tipo_producao 'painel')}}
                    <li><b>Acabamento:</b> {{acabamentos_painel}}</li>
                    <li><b>Costura:</b> Overloque ({{overloque}}) / El√°stico ({{elastico}})</li>
                    <li><b>Ilh√≥s:</b> {{ilhos_resumo}} / <b>Corda:</b> {{cordinha_resumo}}</li>
                    {{/if}}

                    {{#if (eq tipo_producao 'totem')}}
                    <li><b>Acabamento:</b> {{acabamento_totem_resumo}}</li>
                    {{#if quantidade_totem}}<li><b>Qtd Totens:</b> {{quantidade_totem}}</li>{{/if}}
                    {{/if}}

                    {{#if (eq tipo_producao 'lona')}}
                    <li><b>Acabamento:</b> {{acabamento_lona}}</li>
                    <li><b>Ilh√≥s:</b> {{quantidade_ilhos}} ({{espaco_ilhos}})</li>
                    {{/if}}

                    {{#if (eq tipo_producao 'adesivo')}}
                    <li><b>Tipo:</b> {{tipo_adesivo}} | <b>Qtd:</b> {{quantidade_adesivo}}</li>
                    {{/if}}
                </ul>

                {{#if observacao_pedido}}
                <div class="obs-box pedido">
                    <div class="obs-title">üìã Observa√ß√µes do Pedido</div>
                    <div class="obs-text">{{observacao_pedido}}</div>
                </div>
                {{/if}}

                {{#if observacao_item}}
                <div class="obs-box">
                    <div class="obs-title">‚ö†Ô∏è Observa√ß√µes de Produ√ß√£o</div>
                    <div class="obs-text">{{observacao_item}}</div>
                </div>
                {{/if}}
            </div>

            <!-- COLUNA IMAGEM -->
            <div class="col-imagem">
                <div class="section-title" style="text-align: center;">Visualiza√ß√£o da Arte</div>
                <div class="img-container">
                    {{#if imagem}}
                    <img src="{{imagem}}" alt="Preview"
                        onerror="this.style.display='none'; this.parentNode.innerHTML='<span class=\'no-image\'>SEM IMAGEM</span>';">
                    {{else}}
                    <span class="no-image">SEM PR√âVIA</span>
                    {{/if}}
                </div>
                {{#if legenda_imagem}}
                <div class="img-legenda">{{legenda_imagem}}</div>
                {{/if}}
            </div>
        </div>

        <!-- FOOTER -->
        <div class="footer">
            <div class="footer-item">
                <div class="footer-label">Designer</div>
                <div class="footer-value">{{designer}}</div>
            </div>
            <div class="footer-item">
                <div class="footer-label">Vendedor</div>
                <div class="footer-value">{{vendedor}}</div>
            </div>
            <div class="footer-item footer-controle">
                <div class="footer-label">Controle de Produ√ß√£o</div>
                <div>RIP: ____________ DATA: ___/___/___</div>
            </div>
        </div>
    </div>
    {{/each}}

</body>

</html>